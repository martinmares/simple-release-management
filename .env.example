# Database Configuration
# PostgreSQL connection string
DATABASE_URL=postgresql://release_mgmt:secret@localhost:5433/release_mgmt

# Server Configuration
# Bind address (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
# Note: CLI argument --host has priority over this ENV variable
HOST=0.0.0.0

# Server port
# Note: CLI argument --port has priority over this ENV variable
PORT=3000

# Base path for reverse proxy support
# Examples:
#   BASE_PATH=              → http://host/api/v1/...
#   BASE_PATH=/release-mgmt → http://host/release-mgmt/api/v1/...
BASE_PATH=

# Logging Configuration
# Possible values: trace, debug, info, warn, error
# Format: target=level, for example: release_mgmt=info,sqlx=warn
RUST_LOG=simple_release_management=info,sqlx=warn,axum=info

# Encryption Secret
# Secret key used for encrypting registry credentials in database
# IMPORTANT: Keep this secret secure! If lost, encrypted credentials cannot be recovered.
# Generate a strong random secret: openssl rand -base64 32
ENCRYPTION_SECRET=change-me-to-a-secure-random-secret-at-least-32-chars

# Skopeo Configuration
# Path to skopeo binary (optional, defaults to 'skopeo' from PATH)
# Linux: /usr/bin/skopeo
# macOS (Homebrew): /opt/homebrew/bin/skopeo
# or just 'skopeo' to use from PATH
SKOPEO_PATH=skopeo

# Copy Job Configuration
# Maximum number of concurrent image copy operations
# Higher values = faster but more network/CPU usage
MAX_CONCURRENT_COPY_JOBS=3

# Timeout for single image copy operation (in seconds)
# Default: 1 hour (3600 seconds)
COPY_TIMEOUT_SECONDS=3600

# Copy retry configuration
# Number of retries for failed copy operations
COPY_MAX_RETRIES=3

# Delay between retries in seconds (exponential backoff)
COPY_RETRY_DELAY_SECONDS=30

# Database Connection Pool
# Maximum number of database connections in the pool
DB_MAX_CONNECTIONS=10

# Minimum idle connections to maintain
DB_MIN_CONNECTIONS=2

# Connection timeout in seconds
DB_CONNECT_TIMEOUT_SECONDS=30

# Security
# Enable/disable TLS verification for registry connections
# Set to false only for testing with self-signed certificates
REGISTRY_TLS_VERIFY=true

# Optional: HTTP proxy for registry connections
# HTTP_PROXY=http://proxy.example.com:8080
# HTTPS_PROXY=http://proxy.example.com:8080
# NO_PROXY=localhost,127.0.0.1

# Feature Flags
# Enable experimental features
ENABLE_AUTO_RETRY=true

# Enable detailed skopeo output logging
ENABLE_SKOPEO_DEBUG=false

# SSE (Server-Sent Events) Configuration
# How often to send keepalive pings in seconds
SSE_KEEPALIVE_SECONDS=30

# Maximum SSE connection duration in seconds (0 = unlimited)
SSE_MAX_DURATION_SECONDS=0
